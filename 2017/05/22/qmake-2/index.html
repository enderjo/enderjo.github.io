<!DOCTYPE html>
          <head>
        <meta charset="utf-8">
            
            <title>
                创建项目文件 | CrazyAirhead
            </title>
            <meta content="width=device-width, initial-scale=1" name="viewport">
            <meta name="theme-color" content="#4184f3">
            
            
            <link href="/favicon.ico" rel="icon"/>
            

            <link rel="stylesheet" href="/css/highlight.light.css">
            <link rel="stylesheet" href="/css/prism-customize.css">
            <link rel="stylesheet" href="/css/nav-icon.css">
            <link rel="stylesheet" href="/css/waves.min.css">
            <link rel="stylesheet" href="/css/jquery.tocify.css">
            <link rel="stylesheet" href="/css/main.css">
            <link rel="stylesheet" href="/css/nav-indicator.css">
            
  

  
            </meta>
        </meta>
    </head>

    <body>
        <header>
            <!-- cover image or sth. -->
        </header>
        <div id="main" class="m-scene">
            
<div class="nav-wrapper">

    <div class="container">
        <nav>
            <div class="logo wave">
                <a href="/" id="logo">
                    CrazyAirhead
                </a>
            </div>
            <div class="nav-toggle-icon" >
                <div class="material-hamburger">
                    <span>
                    </span>
                    <span>
                    </span>
                    <span>
                    </span>
                </div>
            </div>
            <div class="menu-wrapper">
                <div class="nav-indicator">
                </div>
                <ul class="menus">
                    
                     
                        <li>
                            <a class="wave " href="/">
                                首页
                            </a>
                        </li>
                     
                        <li>
                            <a class="wave " href="/archives">
                                归档
                            </a>
                        </li>
                     
                        <li>
                            <a class="wave " href="/about">
                                关于
                            </a>
                        </li>
                     
                        <li>
                            <a class="wave no-smoothstate" href="/atom.xml">
                                订阅
                            </a>
                        </li>
                     
                    
                   
                </ul>
            </div>
        </nav>
    </div>
</div>
            <div class="container content">
                <div class="scene_element scene_element--fadein">
                    <div class="row">
    <div class="main">
        <article>
          
          <header class="post-header">
          
          </header>
          <h1 class="post-title">创建项目文件</h1>

          <section class="post-info">
            <span class="post-date">2017/05/22</span>
            
            
            <span class="post-tags">
              <ul class="post-tag-list"><li class="post-tag-list-item"><a class="post-tag-list-link" href="/tags/Qt/">Qt</a></li><li class="post-tag-list-item"><a class="post-tag-list-link" href="/tags/qmake/">qmake</a></li></ul>
            </span>
            
          </section>

          <section class="post-content">
            <h1 id="创建项目文件"><a href="/2017/05/22/qmake-2/#创建项目文件" class="headerlink" title="创建项目文件"></a>创建项目文件</h1><p>项目文件包含了所有qmake用于构建应用程序，类库和插件的信息。通常，您使用一系列声明来指定项目中的资源，但是对简单编程结构的支持使您可以为不同的平台和环境描述不同的构建过程。</p>
<h2 id="项目文件要素"><a href="/2017/05/22/qmake-2/#项目文件要素" class="headerlink" title="项目文件要素"></a>项目文件要素</h2><p>qmake使用的项目文件的格式可以支持简单的和相对复杂的系统构建。简单的项目文件通过直接申请的方式，通过标准的变量的定义来指示项目中的头文件和源文件。复杂的项目通过控制流来调整构建过程。接下来的章节介绍项目文件中不同类型的要素。</p>
<h3 id="变量"><a href="/2017/05/22/qmake-2/#变量" class="headerlink" title="变量"></a>变量</h3><p>在项目文件中，变量被用来保存字符串列表。在最简单的项目中，这些变量可以告诉qmake需要使用的配置选项，或者提供构建时的文件名和路径。</p>
<p>qmake looks for certain variables in each project file, and it uses the contents of these to determine what it should write to a Makefile. For example, the lists of values in the HEADERS and SOURCES variables are used to tell qmake about header and source files in the same directory as the project file.</p>
<p>qmake从每个项目文件中查找变量，并根据这些变量来决定写入Makefile的内容。比如说，<code>HEADERS</code>和<code>SOURCES</code>变量就用来告诉qamke这些头文件和源文件是一个工程中的文件。</p>
<p>Variables can also be used internally to store temporary lists of values, and existing lists of values can be overwritten or extended with new values.</p>
<p>变量内部地可用来存储临时的值，也可以用新值来覆盖或者拓展。</p>
<p>The following snippet illustrates how lists of values are assigned to variables:</p>
<p>下面的片断说明了如何给变量赋值：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">HEADERS = mainwindow.h paintwidget.h</div></pre></td></tr></table></figure></p>
<p>The list of values in a variable is extended in the following way:<br>变量的值可以通过下面的方式进行扩展：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">SOURCES = main.cpp mainwindow.cpp \</div><div class="line">            paintwidget.cpp</div><div class="line">CONFIG += console</div></pre></td></tr></table></figure></p>
<p>Note: The first assignment only includes values that are specified on the same line as the HEADERS variable. The second assignment splits the values in the SOURCES variable across lines by using a backslash ().</p>
<p>注意：第一个赋值语句只包含了同一行中设置的值给<code>HEADERS</code>变量。而第二个赋值语句通过反斜杠()将多行的值赋给<code>SOURCES</code>变量。</p>
<p>The CONFIG variable is another special variable that qmake uses when generating a Makefile. It is discussed in General Configuration. In the snippet above, console is added to the list of existing values contained in CONFIG.<br><code>CONFIG</code>是另一个qmake生成Makefile时用到的特殊变量。它在<a href="/2017/05/22/qmake-2/">通用配置</a>中介绍了。在上面的片断中，<code>console</code>被追加到<code>CONFIG</code>的值列表中。</p>
<p>The following table lists some frequently used variables and describes their contents. For a full list of variables and their descriptions, see Variables.</p>
<p>下面的表格列了一些常用的变量和它的说明。需要查看完整列表，参看<a href="/2017/05/22/qmake-2/">变量</a>。</p>
<table>
<thead>
<tr>
<th>变量</th>
<th>值说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>CONFIG</td>
<td>通用项目配置选项.</td>
</tr>
<tr>
<td>DESTDIR</td>
<td>生成文件路径.</td>
</tr>
<tr>
<td>FORMS</td>
<td>用户界面编译器(uic)需要处理的UI文件.</td>
</tr>
<tr>
<td>HEADERS</td>
<td>项目头文件.</td>
</tr>
<tr>
<td>QT</td>
<td>项目中依赖的Qt模块.</td>
</tr>
<tr>
<td>RESOURCES</td>
<td>资源文件. 参看<a href="/2017/05/22/qmake-2/">Qt资源系统</a>查看更多细节.</td>
</tr>
<tr>
<td>SOURCES</td>
<td>项目源文件.</td>
</tr>
<tr>
<td>TEMPLATE</td>
<td>项目模板，它决定了编译出来的文件是应用文件，类库还是插件.</td>
</tr>
</tbody>
</table>
<p>The contents of a variable can be read by prepending the variable name with $$. This can be used to assign the contents of one variable to another:<br>在变量前加上<code>$$</code>可以取出变量的值，它被用于将一个变量的值赋给另一个变量：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">TEMP_SOURCES = $$SOURCES</div></pre></td></tr></table></figure></p>
<p>The $$ operator is used extensively with built-in functions that operate on strings and lists of values. For more information, see qmake Language.<br>Whitespace<br>Usually, whitespace separates values in variable assignments. To specify values that contain spaces, you must enclose the values in double quotes:</p>
<p>  DEST = “Program Files”</p>
<p>The quoted text is treated as a single item in the list of values held by the variable. A similar approach is used to deal with paths that contain spaces, particularly when defining the INCLUDEPATH and LIBS variables for the Windows platform:</p>
<p>  win32:INCLUDEPATH += “C:/mylibs/extra headers”<br>  unix:INCLUDEPATH += “/home/user/extra headers”</p>
<p>Comments<br>You can add comments to project files. Comments begin with the # character and continue to the end of the same line. For example:</p>
<h1 id="Comments-usually-start-at-the-beginning-of-a-line-but-they"><a href="/2017/05/22/qmake-2/#Comments-usually-start-at-the-beginning-of-a-line-but-they" class="headerlink" title="Comments usually start at the beginning of a line, but they"></a>Comments usually start at the beginning of a line, but they</h1><h1 id="can-also-follow-other-content-on-the-same-line"><a href="/2017/05/22/qmake-2/#can-also-follow-other-content-on-the-same-line" class="headerlink" title="can also follow other content on the same line."></a>can also follow other content on the same line.</h1><p>To include the # character in variable assignments, it is necessary to use the contents of the built-in LITERAL_HASH variable.<br>Built-in Functions and Control Flow<br>qmake provides a number of built-in functions to enable the contents of variables to be processed. The most commonly used function in simple project files is the include() function which takes a filename as an argument. The contents of the given file are included in the project file at the place where the include function is used. The include function is most commonly used to include other project files:</p>
<p>  include(other.pro)</p>
<p>Support for conditional structures is made available via scopes that behave like if statements in programming languages:</p>
<p>  win32 {<br>      SOURCES += paintwidget_win.cpp<br>  }</p>
<p>The assignments inside the braces are only made if the condition is true. In this case, the win32 CONFIG option must be set. This happens automatically on Windows. The opening brace must stand on the same line as the condition.<br>More complex operations on variables that would usually require loops are provided by built-in functions such as find(), unique(), and count(). These functions, and many others are provided to manipulate strings and paths, support user input, and call external tools. For more information about using the functions, see qmake Language. For lists of all functions and their descriptions, see Replace Functions and Test Functions.<br>Project Templates<br>The TEMPLATE variable is used to define the type of project that will be built. If this is not declared in the project file, qmake assumes that an application should be built, and will generate an appropriate Makefile (or equivalent file) for the purpose.<br>The following table summarizes the types of projects available and describes the files that qmake will generate for each of them:</p>
<p>Template<br>qmake Output<br>app (default)<br>Makefile to build an application.<br>lib<br>Makefile to build a library.<br>aux<br>Makefile to build nothing. Use this if no compiler needs to be invoked to create the target, for instance because your project is written in an interpreted language.<br>Note: This template type is only available for Makefile-based generators. In particular, it will not work with the vcxproj and Xcode generators.<br>subdirs<br>Makefile containing rules for the subdirectories specified using the SUBDIRS variable. Each subdirectory must contain its own project file.<br>vcapp<br>Visual Studio Project file to build an application.<br>vclib<br>Visual Studio Project file to build a library.<br>vcsubdirs<br>Visual Studio Solution file to build projects in sub-directories.</p>
<p>See Building Common Project Types for advice on writing project files for projects that use the app and lib templates.<br>When the subdirs template is used, qmake generates a Makefile to examine each specified subdirectory, process any project file it finds there, and run the platform’s make tool on the newly-created Makefile. The SUBDIRS variable is used to contain a list of all the subdirectories to be processed.<br>General Configuration<br>The CONFIG variable specifies the options and features that the project should be configured with.<br>The project can be built in release mode or debug mode, or both. If debug and release are both specified, the last one takes effect. If you specify the debug_and_release option to build both the debug and release versions of a project, the Makefile that qmake generates includes a rule that builds both versions. This can be invoked in the following way:</p>
<p>  make all</p>
<p>Adding the build_all option to the CONFIG variable makes this rule the default when building the project.<br>Note: Each of the options specified in the CONFIG variable can also be used as a scope condition. You can test for the presence of certain configuration options by using the built-in CONFIG() function. For example, the following lines show the function as the condition in a scope to test whether only the opengl option is in use:</p>
<p>  CONFIG(opengl) {<br>      message(Building with OpenGL support.)<br>  } else {<br>      message(OpenGL support is not available.)<br>  }</p>
<p>This enables different configurations to be defined for release and debug builds. For more information, see Using Scopes.<br>The following options define the type of project to be built.<br>Note: Some of these options only take effect when used on the relevant platform.</p>
<p>Option<br>Description<br>qt<br>The project is a Qt application and should link against the Qt library. You can use the QT variable to control any additional Qt modules that are required by your application. This value is added by default, but you can remove it to use qmake for a non-Qt project.<br>x11<br>The project is an X11 application or library. This value is not needed if the target uses Qt.</p>
<p>The application and library project templates provide you with more specialized configuration options to fine tune the build process. The options are explained in detail in Building Common Project Types.<br>For example, if your application uses the Qt library and you want to build it in debug mode, your project file will contain the following line:</p>
<p>  CONFIG += qt debug</p>
<p>Note: You must use “+=”, not “=”, or qmake will not be able to use Qt’s configuration to determine the settings needed for your project.<br>Declaring Qt Libraries<br>If the CONFIG variable contains the qt value, qmake’s support for Qt applications is enabled. This makes it possible to fine-tune which of the Qt modules are used by your application. This is achieved with the QT variable which can be used to declare the required extension modules. For example, we can enable the XML and network modules in the following way:</p>
<p>  QT += network xml</p>
<p>Note: QT includes the core and gui modules by default, so the above declaration adds the network and XML modules to this default list. The following assignment omits the default modules, and will lead to errors when the application’s source code is being compiled:</p>
<p>  QT = network xml # This will omit the core and gui modules.</p>
<p>If you want to build a project without the gui module, you need to exclude it with the “-=” operator. By default, QT contains both core and gui, so the following line will result in a minimal Qt project being built:</p>
<p>  QT -= gui # Only the core module is used.</p>
<p>For a list of Qt modules that you can add to the QT variable, see QT.<br>Configuration Features<br>qmake can be set up with extra configuration features that are specified in feature (.prf) files. These extra features often provide support for custom tools that are used during the build process. To add a feature to the build process, append the feature name (the stem of the feature filename) to the CONFIG variable.<br>For example, qmake can configure the build process to take advantage of external libraries that are supported by pkg-config, such as the D-Bus and ogg libraries, with the following lines:</p>
<p>  CONFIG += link_pkgconfig<br>  PKGCONFIG += ogg dbus-1</p>
<p>For more information about adding features, see Adding New Configuration Features.<br>Declaring Other Libraries<br>If you are using other libraries in your project in addition to those supplied with Qt, you need to specify them in your project file.<br>The paths that qmake searches for libraries and the specific libraries to link against can be added to the list of values in the LIBS variable. You can specify the paths to the libraries or use the Unix-style notation for specifying libraries and paths.<br>For example, the following lines show how a library can be specified:</p>
<p>  LIBS += -L/usr/local/lib -lmath</p>
<p>The paths containing header files can also be specified in a similar way using the INCLUDEPATH variable.<br>For example, to add several paths to be searched for header files:</p>
<p>  INCLUDEPATH = c:/msdev/include d:/stl/include</p>
<link href="/css/prism.css" rel="stylesheet">
          </section>
        </article>
        

       
        <div class="pager">
          
          
            <a class="post-next pager-item" href="/2017/05/22/qmake-1/">
              <strong class="article-nav-caption">下一篇</strong>
              <p class="post-nav-title">入门</p>
            </a>
          
        </div>
        

         <!-- comments -->
        <div class="comment-section">
  
    

    <!-- 多说评论框 start -->
      <div class="ds-thread" data-thread-key="_posts/qmake-2.md" data-title="创建项目文件" data-url="http://l4qiang.me/2017/05/22/qmake-2/"></div>
    <!-- 多说评论框 end -->
    <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
      <script type="text/javascript">
      var duoshuoQuery = {short_name:"wayouliu"};
      (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] 
         || document.getElementsByTagName('body')[0]).appendChild(ds);
      })();
      </script>
    <!-- 多说公共JS代码 end -->

  


</div>

    </div>
    
</div>

                </div>
            </div>
        </div>
        <footer class="footer">
    <p>由<a href="http://hexo.io/" target="_blank">Hexo</a>强力驱动，搭载<a href="https://github.com/wayou/hexo-theme-gstyle">gstyle</a>主题</p>
    <p>
        &copy; 2017 L4qiang
    </p>
</footer>
<script src="/lib/jquery.js"></script>
<script src="/lib/waves.js"></script>
<script src="/lib/jquery-ui.js"></script>
<script src="/lib/jquery.tocify.js"></script>
<script src="/js/main.js"></script>

    </body>
</html>
